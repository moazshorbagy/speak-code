<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>Voic Programming</title>
	<link href="styles/styles.css" rel="stylesheet" type="text/css">
	<link href="styles/collapsible.css" rel="stylesheet" type="text/css">
	<link href="styles/files.css" rel="stylesheet" type="text/css">
	<link href="styles/open-editors.css" rel="stylesheet" type="text/css">
	<link href="styles/editor-container.css" rel="stylesheet" type="text/css">
	<link href="styles/main-container.css" rel="stylesheet" type="text/css">
	<link href="styles/root-container.css" rel="stylesheet" type="text/css">
	<link href="styles/leftpanel.css" rel="stylesheet" type="text/css">
	<!-- the below commented scripts are for xterm-->
	<!-- <link rel="stylesheet" href="node_modules/xterm/css/xterm.css" />
	<script src="node_modules/xterm/lib/xterm.js"></script> -->
	<script>window.$ = window.jQuery = require('jquery');</script>
	<script src="css-element-queries/src/ResizeSensor.js"></script>
</head>

<body>
	<div id="root-container">
		<div id="editor-top-panel" class="preventSelect"></div>
		<div id="main-container" class="main-container">
			<div class="leftpanel-container">
				<div id="open-editors-container" class="open-editors-container"></div>
				<div id="folders-panel" class="leftpanel preventSelect"></div>
			</div>
			<div id="editor-container" class="editor-container">
				<div id="editor"></div>
			</div>
			<div class="horizontal-gutter"></div>
		</div>
	</div>
</body>
<script src="import.js"></script>
<script>
	ipcRenderer.on('request-open-folder', () => {
		ipcRenderer.send('open-folder', wd.getCurrentWorkingDirectory());
	});
	ipcRenderer.on('request-open-file', () => {
		ipcRenderer.send('open-file');
	});
</script>
<script>
	var workingDirectory = wd.getCurrentWorkingDirectory();

	if (workingDirectory == null) {
		let folderspanel = $("#folders-panel")
		folderspanel.append("<p class='leftpanel-text'>Tap to open a folder</p>")
		folderspanel.append("<button id='open-folder-button'>Open Folder</button>")
	}
</script>
<script>
	var button = document.getElementById('open-folder-button');
	button.addEventListener("click", () => {
		ipcRenderer.send('open-folder', wd.getCurrentWorkingDirectory());
	});

	ipcRenderer.on('chosen-directory', (event, path) => {
		if (path) {
			wd.setWorkingDirectory(path)
			wd.displayWorkingDirectory()
		}
	});

	ipcRenderer.on('chosen-file', (event, args) => {
		editor.openDoc(args.doc, args.filePath);
		openedFiles.addOpenEditors();
		openedFiles.addOpenedFile(args.filePath);
	});
</script>
<script>
	ipcRenderer.on('save-file', function (event, arg) {
		editor.saveFile();
	});

	ipcRenderer.on('insert-plain-code', function (event, arg) {
		editor.insertText(arg);
	});

	ipcRenderer.on('get-current-line', function(event, arg) {
		event.sender.send('current-line', editor.getCurrentLine());
	});

</script>
<script>
	var Split = require('split-grid')
	Split({
		columnGutters: [{
			track: 1,
			element: document.querySelector('.horizontal-gutter'),
		}]
	})
</script>
<script type="text/javascript" src="app-menu/populate-menu.js"></script>

</html>